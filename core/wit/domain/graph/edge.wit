// Edge Definition for Universal Graph System
//
// Edges connect nodes and carry directional relationship information.

package convergence:domain@0.1.0;

interface edge {
    use address.{address};
    use node.{property-value};

    /// Edge direction for traversal
    enum edge-direction {
        outbound,
        inbound,
        both,
    }

    /// Edge metadata
    record edge-metadata {
        created: u64,
        weight: float64,
    }

    /// Get edge's unique address
    get-address: func() -> address;

    /// Get source node address
    get-source: func() -> address;

    /// Get target node address
    get-target: func() -> address;

    /// Get edge type (optional)
    get-type: func() -> option<string>;

    /// Get edge weight (for pathfinding)
    get-weight: func() -> float64;

    /// Set edge weight
    set-weight: func(weight: float64) -> result<_, string>;

    /// Get property by key
    get-property: func(key: string) -> option<property-value>;

    /// Set property value
    set-property: func(key: string, value: property-value) -> result<_, string>;

    /// List all property keys
    list-properties: func() -> list<string>;

    /// Get metadata
    get-metadata: func() -> edge-metadata;

    /// Create a new edge
    create-edge: func(
        id: string,
        source: address,
        target: address,
        edge-type: option<string>,
        weight: option<float64>
    ) -> result<address, string>;

    /// Delete edge
    delete-edge: func(addr: address) -> result<_, string>;

    /// Get outgoing edges from a node
    get-outgoing: func(source: address, edge-type: option<string>) -> list<address>;

    /// Get incoming edges to a node
    get-incoming: func(target: address, edge-type: option<string>) -> list<address>;

    /// Get all edges for a node
    get-connected: func(node: address, edge-type: option<string>) -> list<address>;

    /// Find edges by type
    find-by-type: func(edge-type: string) -> list<address>;
}
