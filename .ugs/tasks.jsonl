{"id":"ap-10a","title":"Specify cross-shard message forwarding protocol","lifecycle":"completed","priority":"P0","description":"Define how messages route between Signal Hub instances when actors on different shards. Kimi marked as BLOCKING. Must specify: actor location discovery, forwarding message format, failure handling, TTL across hops, circular forwarding prevention. Deliverable: Add to PROTOCOL.md and SCALABILITY.md","assignee":"@(system)"}
{"id":"ap-4ei","title":"Fix API signature mismatches (.onMessage → .on('message'))","lifecycle":"completed","priority":"P2","description":"Replace 3 instances of .onMessage() with .on('message') in messaging.test.ts:286, pubsub.test.ts:80, pubsub.test.ts:98. Quick win - estimated 30 minutes.","assignee":"@(system)"}
{"id":"ap-0qe","title":"Add hub:refresh_token to MVP","lifecycle":"completed","priority":"P1","description":"Design token refresh mechanism to avoid forced disconnect/reconnect every 1-4 hours. Kimi upgraded to HIGH. Must specify: hub:refresh_token message type, token refresh flow, grace period handling, security considerations (replay attacks, token rotation). Add to MESSAGE_TYPES.md and PROTOCOL.md","assignee":"@(system)"}
{"id":"ap-5fi","title":"Define JSON Schema + Zod for hub:* messages","lifecycle":"completed","priority":"P0","description":"Create language-agnostic JSON Schema definitions for all 24 hub:* message types. Generate Zod validators from JSON Schema (following agentic-primer pattern). Kimi upgraded to P0 (MUST FIX before MVP). Files: schema/hub-messages.schema.json, generated zod validators.","assignee":"@(system)"}
{"id":"ap-2nc","title":"P0: Connection Lifecycle Fixes (WS1.1)","lifecycle":"completed","priority":"P0","description":"Implement duplicate connection detection and fix disconnect response ordering. Includes connection state tracking for observability. Success: Reconnection tests pass, old sessions properly cleaned up.","assignee":"@(system)"}
{"id":"ap-3m1","title":"Fix actor discovery returning empty results (5 tests)","lifecycle":"completed","priority":"P2","description":"Actor discovery returns empty or incomplete arrays. Investigate registry storage in Durable Object, verify hub:discover handler, fix storage or query logic. Can run parallel to message delivery investigation. Estimated 2-3 hours.","assignee":"@(system)"}
{"id":"ap-gn2","title":"Signal Hub Implementation","lifecycle":"completed","priority":"P1","description":"Build Signal Hub on Cloudflare Workers using session-gateway pattern to enable protocol convergence across SEAG (local) ↔ Signal Hub (Workers) ↔ Browser clients. Validates the entire stack end-to-end with real-world actor coordination.","assignee":"@(system)"}
{"id":"ap-azc","title":"Flatten hub:send payload structure","lifecycle":"completed","priority":"P2","description":"Redesign hub:send to eliminate confusing nested addressing (outer 'to' vs inner 'to'). Current: message-within-message pattern. Goal: Single-level addressing. No breaking changes to SharedMessage spec. Update PROTOCOL.md and MESSAGE_TYPES.md. Opus P1, Kimi downgraded to V2 (defer).","assignee":"@(system)"}
{"id":"ap-gn2.1","title":"Design Signal Hub protocol and schema","lifecycle":"completed","priority":"P1","description":"Define the message protocol for Signal Hub actor coordination. Specify message types (register, broadcast, point-to-point), schema using @agentic-primer/protocols types, and wire format. Document in docs/signal-hub/PROTOCOL.md with examples.","assignee":"@(system)"}
{"id":"ap-gn2.2","title":"Implement Signal Hub on Cloudflare Workers","lifecycle":"completed","priority":"P1","description":"Build Signal Hub using session-gateway pattern from docs/actor-design/patterns/. Use Durable Objects for actor state, WebSocket for connections. Implement protocol from design task. Location: services/signal-hub/","assignee":"@(system)"}
{"id":"ap-gn2.4","title":"Create Signal Hub browser client","lifecycle":"completed","priority":"P1","description":"Build lightweight browser client for Signal Hub using native WebSocket. No framework dependencies. Expose API for connecting browser-based actors. Include in packages/signal-hub-client/","assignee":"@(system)"}
{"id":"ap-5r3","title":"Replace jsonwebtoken with jose library","lifecycle":"completed","priority":"P1","description":"Update SECURITY.md to use panva/jose instead of jsonwebtoken for Cloudflare Workers compatibility (Web Crypto API vs Node.js crypto). Update all JWT examples, verification flows, import statements. Verify jose works in Workers runtime.","assignee":"@(system)"}
{"id":"ap-gn2.5","title":"End-to-end Signal Hub integration tests","lifecycle":"completed","priority":"P2","description":"Test SEAG → Signal Hub → Browser flow. Validate message delivery, actor discovery, failover scenarios. Add to tests/integration/signal-hub/","assignee":"@(system)"}
{"id":"ap-gn2.3","title":"Integrate SEAG with Signal Hub client","lifecycle":"completed","priority":"P1","description":"Add Signal Hub client to SEAG/UGS that connects local actors to remote Signal Hub. Implement reconnection logic, message routing, and state sync. Update ugs/ codebase.","assignee":"@(system)"}
{"id":"ap-lr1","title":"Investigate and fix message delivery timeouts (22 tests)","lifecycle":"completed","priority":"P2","description":"Critical blocker: All messaging, pub/sub, and broadcast tests timing out at 5000ms. Add debug logging to client and hub, trace message flow, identify breakpoint, implement fix. Estimated 4-6 hours. Affects 73% of failures.","assignee":"@(system)"}
{"id":"ap-zyx","title":"Fix session cleanup on disconnect (1 test)","lifecycle":"completed","priority":"P3","description":"Session ID not cleared after disconnect. Add 'this.sessionId = null' to SignalHubClient disconnect() method. Simple fix, estimated 15 minutes. Can be done anytime in parallel.","assignee":"@(system)"}
{"id":"ap-rls","title":"Test: Framework Fixes (WS3.1)","lifecycle":"completed","priority":"P0","description":"Fix module import error, investigate and resolve broadcast/pub/sub timeout root causes, fix message ordering race condition. Success: All 13 failing tests pass, test suite stable."}
{"id":"ap-5a4","title":"P0: Performance & Observability (WS1.3)","lifecycle":"completed","priority":"P0","description":"Remove verbose debug logging from hot paths, add DEBUG flag support, implement basic per-minute metrics. Success: Log volume reduced >90%, metrics collection operational."}
{"id":"ap-907","title":"P2: Developer Experience (WS4.2)","lifecycle":"completed","priority":"P2","description":"Enhance error messages with resolution steps, add client sendMessage() convenience API. Success: All errors actionable, flat payload construction hidden from users."}
{"id":"ap-a8v","title":"P1: Reliability & Operations (WS2.2)","lifecycle":"completed","priority":"P1","description":"Reduce heartbeat interval to 20s, implement structured JSON logging across all handlers. Success: Heartbeat 20s interval, all logs JSON-formatted and queryable."}
{"id":"ap-ayo","title":"P1: Security & Correctness (WS2.1)","lifecycle":"completed","priority":"P1","description":"Implement per-session rate limiting, fix unsubscribe to be topic-specific, resolve target address ambiguity. Success: Rate limiting active (10 msg/sec), unsubscribe works per-topic, target addressing unambiguous."}
{"id":"ap-br1","title":"P2: Performance Optimizations (WS4.1)","lifecycle":"completed","priority":"P2","description":"Add inverse index for subscription cleanup (O(S) not O(T)), optimize broadcast JSON.stringify (stringify once). Success: Disconnect <10ms with 100 topics, broadcast CPU reduced >50%."}
{"id":"ap-uo6","title":"P2: Advanced Features (WS4.3)","lifecycle":"completed","priority":"P2","description":"Implement hub:refresh_token for long-lived sessions. Success: Sessions >1 hour can refresh tokens, documented in PROTOCOL.md."}
{"id":"ap-j1s","title":"End-to-end integration verification (100% pass rate)","lifecycle":"completed","priority":"P2","description":"Final verification after all fixes complete. Run full test suite 3x to verify 43/43 tests pass consistently. Check performance metrics, document results. Estimated 30 minutes. Depends on all previous phases."}
{"id":"ap-x6y","title":"P0: Resource Protection (WS1.2)","lifecycle":"completed","priority":"P0","description":"Schedule TTL cleanup alarm, add message size check before parse, enforce broadcast limit. Prevents resource exhaustion attacks. Success: Alarms fire, oversized messages rejected, broadcast limit enforced."}
{"id":"ap-ym7","title":"Test: Coverage Expansion (WS3.2)","lifecycle":"completed","priority":"P1","description":"Add handler unit tests (registration, messaging, pubsub), create reconnection scenario tests. Success: Handler coverage >80%, reconnection scenarios validated."}
{"id":"bun-backpressure","title":"BunWebSocketBridge: handle send() backpressure via drain queue","lifecycle":"completed","priority":"P3","description":"BunWebSocketBridge.broadcast() ignores the number return value of ws.send(). When send() returns -1 (backpressure) or 0 (dropped), messages are silently lost. Implement a per-connection queue that buffers unsent messages and flushes in the handleDrain() handler. See packages/bun/TRANSPORTS.md for context.","assignee":"claude"}
{"id":"ap-virt-factory","title":"Virtual actor factory hook in MessageRouter (on address miss)","lifecycle":"completed","priority":"P1","assignee":"claude"}
{"id":"ai-scaffold","title":"@agentic-primer/ai package scaffold: tsconfig, package.json, index","lifecycle":"completed","priority":"P2","assignee":"claude"}
{"id":"ap-bin-tests","title":"Integration tests: binary channel protocol (CF + Bun bridges)","lifecycle":"completed","priority":"P1","depends-on":["ap-virt-factory"],"assignee":"claude"}
{"id":"ai-schema","title":"AI actor message schema additions to hub-messages.schema.json","lifecycle":"completed","priority":"P2","depends-on":["ai-scaffold"],"assignee":"claude"}
{"id":"ai-protocol-types","title":"Canonical AI actor message types package","lifecycle":"completed","priority":"P2","depends-on":["ai-schema"],"assignee":"claude"}
{"id":"ai-gateway","title":"GatewayActor: AI Gateway proxy actor (bln_ai namespace)","lifecycle":"completed","priority":"P2","depends-on":["ai-schema"],"assignee":"claude"}
{"id":"ai-session","title":"SessionActor: per-user session actor (replaces VoiceSession)","lifecycle":"completed","priority":"P2","depends-on":["ai-gateway"],"assignee":"claude"}
{"id":"ai-inference","title":"InferenceActor: LLM inference routing actor","lifecycle":"completed","priority":"P2","depends-on":["ai-gateway"],"assignee":"claude"}
{"id":"ai-stt","title":"SttActor: speech-to-text actor (Deepgram Nova)","lifecycle":"completed","priority":"P2","depends-on":["ai-gateway"],"assignee":"claude"}
{"id":"ai-tts","title":"TtsActor: text-to-speech actor (Deepgram Aura)","lifecycle":"completed","priority":"P2","depends-on":["ai-gateway"],"assignee":"claude"}
{"id":"md-lint","title":"Add markdown linting to check workflow","lifecycle":"completed","priority":"P3","description":"Install markdownlint-cli2 at root. Run --fix first to auto-fix blanks/headings/fences. Disable remaining noisy rules (MD034, MD040) or fix manually. Scope lint:md to packages/ and services/ to avoid historical noise in core/ and archive/. Then add to root check target.","assignee":"system"}
{"id":"dsl-helpers-types","title":"Fix stale QueryMetadata assertions in dsl-helpers.test.ts","lifecycle":"completed","priority":"P2","assignee":"system"}
{"id":"alias-cleanup","title":"Remove unused imports + await no-ops in alias-resolution.test.ts","lifecycle":"completed","priority":"P3","assignee":"system"}
{"id":"fs-router-iface","title":"FileSystemActor: accept IMessageRouter instead of concrete MessageRouter","lifecycle":"completed","priority":"P2","assignee":"system"}
{"id":"dm-scaffold","title":"dm-scaffold: BunActorSystem scaffold in brianln.ai daemon","lifecycle":"pending","priority":"P3"}
{"id":"ai-discovery","title":"ai-discovery: add ai.discover + ai.health handlers to all AI actors","lifecycle":"completed","priority":"P2","assignee":"bln"}
{"id":"ai-tests","title":"ai-tests: integration tests for all packages/ai actors","lifecycle":"completed","priority":"P2","assignee":"bln"}
{"id":"spec-expired-jwt","title":"Test: expired JWT on initial hub:connect","lifecycle":"completed","priority":"P1","assignee":"claude"}
{"id":"spec-hibernation-wake","title":"Test: hibernation wake — session/registry state persists, message delivery works on wake","lifecycle":"completed","priority":"P1","assignee":"claude"}
{"id":"ugfm-claim2-scale","title":"Claim 2: Add 100+ node scalability test","lifecycle":"completed","priority":"P1","assignee":"claude"}
{"id":"ugfm-claim3-runnable","title":"Claim 3: Make generated code actually runnable","lifecycle":"completed","priority":"P1","assignee":"claude"}
{"id":"ugfm-claim4-comparison","title":"Claim 4: Head-to-head comparison with domain-specific approach","lifecycle":"completed","priority":"P2","assignee":"claude"}
{"id":"ugfm-spin-comparison","title":"UGFM: Head-to-head SPIN comparison on Peterson's mutual exclusion","lifecycle":"pending","priority":"P2","description":"Model Peterson's 2-process mutual exclusion in both SPIN/Promela and UGFM/GraphStore, then generate a rigorous head-to-head comparison. Goals: (1) Install SPIN (brew install spin). (2) Write Peterson's algorithm in Promela (~30 LOC) with LTL property: mutual exclusion ([] \\!(p1_cs && p2_cs)) and liveness ([] (p1_try -> <> p1_cs)). Run spin -a && gcc pan.c && ./pan -a. Record: state count, verification time, property class. (3) Model the same system as a Kripke structure in GraphStore — 2-process states (idle, trying, critical), transitions, labels. Use traverse() for safety, findSCCs() for GF-liveness. Identify which properties GraphStore can verify vs. cannot (response liveness needs product automaton). (4) Write comparison document to analysis/ugfm-spin-comparison.md with: Promela spec, GraphStore spec, property verification matrix (which tool verifies which), LOC counts, state space sizes, timing. (5) Add test in ugfm-claim2.test.ts suite 2.7 demonstrating what UGFM CAN verify about Peterson's. The honest finding: SPIN verifies liveness via full state-space + Buchi automaton; UGFM verifies structural safety and GF-liveness via SCC; response liveness ([] (try -> <> cs)) requires product construction on the UGFM substrate. Repos: agentic-primer (tests), universal-graph-formal-model/analysis/ (comparison doc)."}
{"id":"ugfm-ctl-datalog","title":"UGFM: CTL model checking via Datalog query layer over GraphStore","lifecycle":"completed","priority":"P2","description":"Implement a minimal Datalog evaluator over GraphStore that gives CTL equivalence. CTL model checking reduces to Datalog with stratified negation (Emerson 1990 / Immerman 1986). Goals: (1) Define core CTL operators as Datalog rules over GraphStore node/edge maps — EF P (existential reachability), AF P (all paths eventually P), EG P (existential invariance), AG P (universal invariance). (2) Implement a fixed-point evaluator in ~300-500 LOC TypeScript that iterates rules to convergence. (3) Demonstrate on ugfm-claim2 Kripke structures: verify deadlock freedom (AG not-sink), mutual exclusion (AG not-both-critical), and liveness (AF service). (4) Write tests in ugfm-claim2.test.ts suite 2.6. Files: ugs/src/ugfm-datalog.ts (evaluator), ugs/src/ugfm-claim2.test.ts (suite 2.6). Success: CTL properties verified on existing Kripke structures using Datalog rules; tests pass.","assignee":"claude"}
{"id":"shot-r2-credentials","title":"Configure R2 API token and aws profile for presigned URLs","lifecycle":"pending","priority":"P2","description":"One-time setup: create R2 API token (read/write on knowledge bucket) at dash.cloudflare.com, configure ~/.aws/credentials profile r2-knowledge with endpoint https://8d78f1135e2ebd70b5c8f5dee9d519ff.r2.cloudflarestorage.com. Run 'shot setup' for step-by-step guide. Unblocks shot -u presign flow."}
{"id":"shot-capture-signal","title":"Add CAPTURE_REQUESTED signal type to signal-hub schema","lifecycle":"pending","priority":"P2","description":"New SignalMessage type: source=shot, type=capture-requested, body=capture params (mode, url, note, session_id, task_id). Allows agents to request captures without CLI access. Brain DO routes to appropriate ScreenCaptureActor implementation based on context (local vs Cloudflare). Add to signal-hub types.ts and Brain DO triage rules.","depends-on":["shot-worker-endpoint"]}
{"id":"shot-cloudflare-actor","title":"CloudflareScreenCaptureActor using Browser Rendering API","lifecycle":"pending","priority":"P2","description":"Cloudflare Worker implementation of ScreenCaptureActor using Browser Rendering API (Puppeteer). Captures any URL headlessly. Useful for: agents capturing dashboards/pages, automated visual regression, COS/EA triggered captures without local machine. Stores to R2 via same worker endpoint. Completes the two-implementation actor pattern.","depends-on":["shot-worker-endpoint"]}
{"id":"shot-skill","title":"Integrate shot as screenshot capture mode in brainstorm daemon","lifecycle":"pending","priority":"P2","description":"shot is not a standalone skill — it folds into /brainstorm as a second capture modality. Changes: (1) Add POST /api/screenshot endpoint to brainstorm server.ts — spawns screencapture -i, returns path + base64 preview. (2) Add camera button to brainstorm UI — calls /api/screenshot, shows preview + note field, same save pipeline as text capture. (3) Add second macOS hotkey (e.g. ⌃⌥S) via Shortcuts.app that calls /api/screenshot directly — zero UI, pure capture mode. (4) /api/save handles both text and ScreenshotArtifact. (5) Update brainstorm SKILL.md to include screenshot subcommands. Brainstorm project: /Users/bln/play/projects/proj-20260220-083002/src/server.ts","depends-on":["shot-bun-rewrite"]}
{"id":"shot-worker-endpoint","title":"brianln.ai Worker: POST /api/assets/screenshot","lifecycle":"pending","priority":"P1","description":"Single atomic write surface: accepts PNG multipart upload, stores to R2 knowledge bucket under screenshots/YYYY/MM/DD/, creates ScreenshotArtifact graph node in UGS, emits visual-capture signal to signal-hub. Returns {id, r2_key, presigned_url, graph_node_id}. Replaces direct wrangler CLI calls from shot. Callable by local shot, agents, mobile, any actor.","depends-on":["shot-actor-design","shot-ugs-asset-entity"]}
{"id":"shot-knowledge-manifest","title":"Implement ~/knowledge/screenshots/manifest.jsonl indexing","lifecycle":"completed","priority":"P2","description":"Each shot capture appends a ScreenshotArtifact JSONL record to ~/knowledge/screenshots/manifest.jsonl and updates INDEX.md. Schema defined in design doc. Currently partially implemented in shot -u flow but needs --know flag as standalone. Follows ~/knowledge/schemas/signal.schema.yaml conventions.","assignee":"system"}
{"id":"shot-actor-design","title":"Design ScreenCaptureActor as generalizable graph actor","lifecycle":"completed","priority":"P1","description":"Define the ScreenCaptureActor interface: capture() → ScreenshotArtifact graph node. Two implementations: LocalScreenCaptureActor (macOS screencapture) and CloudflareScreenCaptureActor (Browser Rendering API). Covers CAPTURE_REQUESTED signal, actor registration in UGS, and brianln.ai Worker as write surface. Design doc at /tmp/screenshot-sharing-design.md.","assignee":"brian"}
{"id":"ug-doc-fix-info-create","title":"Fix ug info create syntax in /ug SKILL.md","lifecycle":"pending","priority":"P1"}
{"id":"ug-cli-fix-info-reporter","title":"Fix info.data vs info.config bug in ugs CLI success reporter","lifecycle":"pending","priority":"P2"}
{"id":"ug-cli-fix-info-all-handlers","title":"Fix info.state->info.lifecycle and info.data->info.config in all info handlers (list, query, get, validate, activate, archive)","lifecycle":"pending","priority":"P2"}
{"id":"shot-bun-rewrite","title":"Rewrite ~/bin/shot from bash to Bun/TypeScript","lifecycle":"in_progress","priority":"P2","description":"Current bash script works for local capture and wrangler upload but gets complex with multiple flags. Rewrite as Bun script consistent with ecosystem skill conventions (CLAUDE.md: all skills must be TypeScript/Bun). Bash wrapper at ~/bin/shot remains as entry point. Enables cleaner --know, --task, --send flag composition and proper error handling.","depends-on":["shot-actor-design"],"assignee":"claude"}
{"id":"shot-actor-interface","title":"Define ScreenCaptureActor TypeScript interface (multi-platform abstraction)","lifecycle":"pending","priority":"P1","description":"Define the shared ScreenCaptureActor interface and ScreenshotArtifact type that all platform implementations must satisfy. Platforms: LocalScreenCaptureActor (macOS screencapture/Bun), BrowserScreenCaptureActor (getDisplayMedia + canvas), CloudflareScreenCaptureActor (Browser Rendering API). Factory/detection logic selects implementation by runtime context. All implementations return identical ScreenshotArtifact — callers are platform-agnostic."}
{"id":"shot-ugs-asset-entity","title":"Add Asset/Artifact entity type to UGS work graph","lifecycle":"completed","priority":"P1","description":"UGS currently has tasks, sessions, agents, epics — no first-class binary artifact node. Add Asset entity with typed edges: captured_during→Session, has_artifact→Task, requested_by→Agent, supported_by→Decision, body_ref→Signal. Required prerequisite for ScreenshotArtifact nodes and all downstream actor integration. Lives in agentic-primer UGS source.","depends-on":["shot-actor-design"],"assignee":"claude"}
{"operation":"task-export","filter":"all","prefix":null,"count":64}
