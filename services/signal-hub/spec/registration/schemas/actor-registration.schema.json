{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "actor-registration.schema.json",
  "title": "Actor Registration",
  "description": "Schema for actor registry entries with TTL and versioning",
  "type": "object",
  "required": [
    "actorAddress",
    "capabilities",
    "metadata",
    "connectionId",
    "registeredAt",
    "expiresAt",
    "version",
    "renewalToken"
  ],
  "properties": {
    "actorAddress": {
      "$ref": "../../schemas/canonical-address.schema.json#/definitions/CanonicalAddress",
      "description": "Actor's unique canonical address"
    },
    "capabilities": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Array of actor capabilities (e.g., ['send', 'receive', 'discover'])",
      "examples": [
        ["send", "receive"],
        ["inference", "analysis"],
        ["ui", "interaction"]
      ]
    },
    "metadata": {
      "type": "object",
      "description": "Custom metadata about the actor",
      "additionalProperties": true,
      "examples": [
        {
          "version": "1.0.0",
          "userAgent": "Mozilla/5.0..."
        },
        {
          "model": "claude-3.5-sonnet",
          "region": "us-west-2"
        }
      ]
    },
    "connectionId": {
      "type": "string",
      "description": "WebSocket session ID linking to active connection",
      "pattern": "^sess_[a-zA-Z0-9-]+$"
    },
    "registeredAt": {
      "type": "integer",
      "description": "Registration timestamp (epoch ms)",
      "minimum": 0
    },
    "expiresAt": {
      "type": "integer",
      "description": "Expiration timestamp (epoch ms)",
      "minimum": 0
    },
    "version": {
      "type": "integer",
      "description": "Registration version number (increments on re-registration)",
      "minimum": 1
    },
    "renewalToken": {
      "type": "string",
      "description": "Opaque token for renewing registration",
      "format": "uuid"
    }
  },
  "additionalProperties": false
}
