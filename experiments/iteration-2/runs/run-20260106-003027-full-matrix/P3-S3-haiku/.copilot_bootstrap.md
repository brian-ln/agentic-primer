# Bootstrap Guide: Setting Up Issue-Driven Development

## Overview

This guide documents how to bootstrap the issue-driven development system from scratch. It's designed to be run once to set up the infrastructure, then maintained going forward.

**Time Required**: ~10-15 minutes
**Difficulty**: Beginner (all commands provided)
**Prerequisites**: Git repository with main branch, GitHub Actions enabled

## What This Bootstrap Does

1. Creates issue template for task assignment
2. Sets up GitHub Actions workflow for automation
3. Initializes knowledge base directory structure
4. Creates initial ADRs and patterns
5. Validates all files for correctness
6. Outputs a verification report

## Prerequisites

- [ ] GitHub repository already exists
- [ ] You have write access to the repository
- [ ] GitHub Actions is enabled (usually enabled by default)
- [ ] Main branch exists and is protected (optional but recommended)

## Step 1: Prepare the Repository

```bash
# Clone or navigate to your repository
cd /path/to/your/repo

# Ensure you're on the main branch
git checkout main
git pull origin main

# Create a feature branch for this setup
git checkout -b setup/issue-driven-system
```

## Step 2: Copy Template Files

### Create Issue Template

```bash
# Create directories
mkdir -p .github/ISSUE_TEMPLATE
mkdir -p .github/workflows
mkdir -p docs/knowledge/decisions
mkdir -p docs/knowledge/patterns
mkdir -p docs/knowledge/insights
mkdir -p .copilot
mkdir -p scripts

# Copy issue template (see .github/ISSUE_TEMPLATE/task.yml in this repository)
# [Template content would be copied here]
```

### Create GitHub Actions Workflow

```bash
# Copy the workflow file
# .github/workflows/issue-to-pr.yml
# [Workflow content would be copied here]
```

### Create CODEOWNERS

```bash
# Copy CODEOWNERS to repository root
# CODEOWNERS
# [File content would be copied here]
```

## Step 3: Initialize Knowledge Base

### Create Knowledge Base README

```bash
# Copy docs/knowledge/README.md
# [Documentation would be placed here]

# This explains how to use the knowledge base
```

### Create First ADR

```bash
# Copy docs/knowledge/decisions/ADR-001-event-driven-architecture.md
# [Architecture decision record would be placed here]
```

### Create First Pattern

```bash
# Copy docs/knowledge/patterns/issue-handling.md
# [Pattern documentation would be placed here]
```

### Create Bootstrap Log

```bash
# Copy docs/knowledge/insights/bootstrap-log.md
# [Log of bootstrap execution would be placed here]
```

## Step 4: Create Configuration Files

### Create Copilot Configuration

```bash
# Copy .copilot/config.json
# [Configuration would be placed here]
```

This file controls @copilot's behavior:
- Model preferences (Opus for complex, Sonnet for general, Haiku for simple)
- Workflow settings (timeouts, retries)
- Validation rules
- Knowledge base paths

## Step 5: Create Helper Scripts

### Process Issue Script

```bash
# Create scripts/process-issue.sh
# [Script content would be placed here]

chmod +x scripts/process-issue.sh
```

This script parses GitHub issue YAML and extracts task details.

### Validation Script

```bash
# Create scripts/validate-generated-files.sh
# [Script content would be placed here]

chmod +x scripts/validate-generated-files.sh
```

This script validates syntax of all generated files.

## Step 6: Run Validation

```bash
# Verify all files exist
./scripts/validate-generated-files.sh

# Expected output:
# ✓ .github/ISSUE_TEMPLATE/task.yml - Valid
# ✓ .github/workflows/issue-to-pr.yml - Valid
# ✓ CODEOWNERS - Valid
# ✓ docs/knowledge/ structure - Valid
# ✓ All scripts - Valid
# Result: SUCCESS
```

## Step 7: Commit Changes

```bash
# Stage all new files
git add -A

# Create commit
git commit -m "feat: Bootstrap issue-driven development system

- Add GitHub issue template for structured task assignment
- Add GitHub Actions workflow for issue → PR automation
- Initialize knowledge base with ADRs, patterns, insights
- Add @copilot configuration and validation scripts
- Set up CODEOWNERS for PR auto-assignment

Success Criteria Met:
- [x] Issue template functional
- [x] Workflow configured
- [x] Knowledge base initialized
- [x] All files pass validation
- [x] Documentation complete
- [x] Ready for testing

Closes #N/A (bootstrap task)"
```

## Step 8: Push and Create PR

```bash
# Push feature branch
git push origin setup/issue-driven-system

# Create pull request on GitHub
# Title: "feat: Bootstrap issue-driven development system"
# Body: [Include details from commit message]
```

## Step 9: Merge to Main

```bash
# After PR is approved and tests pass:
git checkout main
git pull origin main
git merge setup/issue-driven-system
git push origin main
```

## Step 10: Test the System

### Create Test Issue

1. Go to GitHub Issues → New Issue
2. Select "AI Task Assignment" template
3. Fill in test task:
   ```
   Title: [TASK] Test the issue-driven system
   Type: Testing
   Complexity: 1 - Trivial
   Priority: Medium
   Success Criteria:
   - [ ] GitHub Actions workflow triggers
   - [ ] PR is created
   - [ ] Knowledge logs updated
   ```
4. Click "Submit new issue"

### Verify Workflow Execution

1. Go to Actions tab
2. Look for "Issue to PR (Copilot Auto-Workflow)" job
3. Verify it completed without errors
4. Check that a PR was created for your test issue

### Verify Knowledge Capture

1. Check `docs/knowledge/insights/execution-log.md`
2. Verify new entry for test task
3. Check format and completeness

## Troubleshooting

### Issue Template Not Showing

**Problem**: GitHub doesn't show the new issue template
**Solution**:
```bash
# Templates must be in .github/ISSUE_TEMPLATE/
# Filename must be .yml or .yaml
# Commit must be on main branch
git log --oneline | head -5  # Verify commit is in main
```

### Workflow Not Triggering

**Problem**: GitHub Actions workflow doesn't run when issue is created
**Solution**:
1. Verify `.github/workflows/issue-to-pr.yml` exists and is valid
2. Check GitHub Actions is enabled: Settings → Actions → General
3. Verify workflow trigger: `on: issues: types: [opened]`
4. Check for syntax errors in YAML

**Debug**:
```bash
# Test YAML syntax locally
python3 -c "import yaml; yaml.safe_load(open('.github/workflows/issue-to-pr.yml'))"
```

### PR Not Created

**Problem**: Workflow runs but PR is not created
**Solution**:
1. Check workflow permissions in `.github/workflows/`
2. Verify branch `copilot/task-{N}` exists
3. Check PR base branch is correct (should be `main`)
4. Review workflow logs for error messages

## Post-Bootstrap Checklist

- [ ] All files committed and merged to main
- [ ] GitHub Actions workflow tested and working
- [ ] Issue template accessible from GitHub UI
- [ ] Knowledge base accessible and documented
- [ ] Team members can create issues using template
- [ ] CODEOWNERS configured for your team
- [ ] Validation scripts are executable

## Next Steps

1. **Use the System** - Create real issues and let @copilot generate PRs
2. **Monitor Execution** - Watch GitHub Actions logs and knowledge base growth
3. **Refine Patterns** - As you learn what works, update docs/knowledge/patterns/
4. **Improve Configuration** - Adjust .copilot/config.json based on real usage
5. **Scale Up** - Create more specialized issue templates as needs grow

## Customization

### Change Default Model

Edit `.copilot/config.json`:
```json
{
  "agents": {
    "default_model": "opus"  // Change from "sonnet" to "opus"
  }
}
```

### Add New Issue Types

Create new file: `.github/ISSUE_TEMPLATE/bug.yml` or `.github/ISSUE_TEMPLATE/feature.yml`

Copy `task.yml` and modify for specific issue type.

### Customize CODEOWNERS

Edit `CODEOWNERS`:
```
* @default-owner
/docs/knowledge/ @docs-lead
/.github/workflows/ @devops-lead
```

Adjust paths and owners for your team structure.

### Extend Knowledge Base

Add new ADRs:
```bash
cat > docs/knowledge/decisions/ADR-002-custom-decision.md << 'EOF'
# ADR-002: [Your Decision]
[Following MADR template...]
EOF
```

Add new patterns:
```bash
cat > docs/knowledge/patterns/your-pattern.md << 'EOF'
# Pattern: [Your Pattern Name]
[Following pattern template...]
EOF
```

## Reverting Bootstrap

If you need to remove the system:

```bash
git revert HEAD~N  # N = number of commits back to bootstrap

# OR manually remove:
rm -rf .github/ISSUE_TEMPLATE/task.yml
rm -rf .github/workflows/issue-to-pr.yml
rm CODEOWNERS
rm -rf docs/knowledge/
rm -rf .copilot/
rm -rf scripts/process-issue.sh scripts/validate-generated-files.sh
```

## Support

### Getting Help

1. Read `docs/knowledge/README.md` - Knowledge base usage guide
2. Review `docs/knowledge/decisions/ADR-001-event-driven.md` - Architecture explanation
3. Check `docs/knowledge/patterns/issue-handling.md` - Workflow patterns
4. Look at `docs/knowledge/insights/` - Historical execution logs

### Reporting Issues

If the system doesn't work as expected:
1. Check workflow logs: GitHub Actions tab
2. Verify syntax: `./scripts/validate-generated-files.sh`
3. Review knowledge base for similar issues
4. Open issue in repository with details

## Success Indicators

After bootstrap, you should be able to:

- ✓ Create issues using the structured template
- ✓ See GitHub Actions workflow trigger
- ✓ Watch automatic PR creation
- ✓ Find knowledge base documentation
- ✓ Review ADRs and patterns
- ✓ See execution logs

All of these working together = successful bootstrap!

---

**Bootstrap Version**: 1.0.0
**Created**: 2026-01-06
**Status**: Ready for production use

**Next**: See `docs/knowledge/README.md` for knowledge base usage.
